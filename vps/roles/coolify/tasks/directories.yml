---
# Create required directories for Coolify

- name: Create Coolify directories with correct ownership
  file:
    path: "{{ item }}"
    state: directory
    owner: 9999
    group: root
    mode: '0700'
  loop:
    - /data/coolify
    - /data/coolify/source
    - /data/coolify/ssh
    - /data/coolify/ssh/keys
    - /data/coolify/ssh/mux
    - /data/coolify/applications
    - /data/coolify/databases
    - /data/coolify/backups
    - /data/coolify/services
    - /data/coolify/webhooks-during-maintenance

- name: Create Coolify proxy directories with root ownership
  file:
    path: "{{ item }}"
    state: directory
    owner: root
    group: root
    mode: '0755'
  loop:
    - /data/coolify/proxy
    - /data/coolify/proxy/dynamic