---
- name: Get Coolify container status
  shell: docker ps --filter 'name=coolify' --format '{{ '{{' }}.Names{{ '}}' }} - {{ '{{' }}.Status{{ '}}' }}'
  register: coolify_containers
  changed_when: false
  failed_when: false

- name: Display Coolify installation information
  debug:
    msg: |
      === COOLIFY INSTALLATION COMPLETE ===

      Server IP: {{ ansible_host }}
      
      Access URLs:
      - Dashboard: http://{{ ansible_host }}:8000
      - WebSocket: http://{{ ansible_host }}:6001
      - Terminal: http://{{ ansible_host }}:6002
      
      Exposed Ports:
      - 8000 (Dashboard)
      - 6001 (WebSocket/Realtime)
      - 6002 (Terminal)
      - 80 (HTTP)
      - 443 (HTTPS)
      - 22 (SSH)

      Running containers:
      {% for container in coolify_containers.stdout_lines %}
      - {{ container }}
      {% endfor %}

      Directories:
      - Config: /data/coolify/source
      - Apps: /data/coolify/applications
      - DBs: /data/coolify/databases
      - Backups: /data/coolify/backups

      Credentials: {{ playbook_dir }}/.credentials/{{ inventory_hostname }}/coolify/.env

      Commands:
      - Logs: docker compose --env-file /data/coolify/source/.env -f /data/coolify/source/docker-compose.yml -f /data/coolify/source/docker-compose.prod.yml logs -f
      - Restart: docker compose --env-file /data/coolify/source/.env -f /data/coolify/source/docker-compose.yml -f /data/coolify/source/docker-compose.prod.yml restart

      Docs: https://coolify.io/docs
